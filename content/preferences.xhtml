<vbox xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      xmlns:html="http://www.w3.org/1999/xhtml">
  <groupbox>
    <label><html:h2>Sci-Hub Settings</html:h2></label>
    <hbox align="center" style="margin: 10px 0;">
      <checkbox id="pref-automatic-pdf-download"
                label="Automatic PDF Download"/>
    </hbox>
    <hbox align="center" style="margin: 10px 0;">
      <label value="Sci-Hub URL:" style="margin-right: 10px;"/>
      <html:input type="text" id="pref-scihub-url" style="flex: 1; min-width: 200px;"/>
    </hbox>
  </groupbox>
  <script><![CDATA[
    (function() {
      const automaticCheckbox = document.getElementById('pref-automatic-pdf-download');
      const urlInput = document.getElementById('pref-scihub-url');

      // Load current values
      automaticCheckbox.checked = Zotero.Prefs.get('zoteroscihub.automatic_pdf_download') ?? true;
      urlInput.value = Zotero.Prefs.get('zoteroscihub.scihub_url') ?? 'https://sci-hub.ru/';

      // Save on change
      automaticCheckbox.addEventListener('command', function() {
        Zotero.Prefs.set('zoteroscihub.automatic_pdf_download', this.checked);
      });

      urlInput.addEventListener('change', function() {
        Zotero.Prefs.set('zoteroscihub.scihub_url', this.value);
      });
    })();
  ]]></script>
</vbox>
